{% extends 'portfolio/layout.html' %}


{% block main %}
{% load static %}

    <p>Metereologia</p>
    <script>
        let globalIdLocal = 1090821;
        document.addEventListener('DOMContentLoaded', function () {
        fetch('https://api.ipma.pt/open-data/forecast/meteorology/cities/daily/{globalIdLocal}.json')
        .then(response => response.json())
        .then(data => {
             document.querySelector('body').innerHTML = 'País : ${data.country}';
        });
        .then(data => {
             const tMin = data.data[1].tMin;
             document.querySelector('body').innerHTML = 'A temperatura mínima é de ${tMin} graus';
             const tMax = data.data[2].tMax;
             document.querySelector('body').innerHTML = 'A temperatura máxima é de ${tMax} graus';
        });
    </script>

<html>
<head>
<script type="text/javascript">
function time()
{
today=new Date();
h=today.getHours();
m=today.getMinutes();
s=today.getSeconds();
document.getElementById('txt').innerHTML=h+":"+m+":"+s;
setTimeout('time()',500);
}
</script>
</head>
<body onload="time()">
<div id="txt"></div>
</body>
</html>

{% endblock %}